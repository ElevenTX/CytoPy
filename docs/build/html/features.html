

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Feature extraction, selection, and summarisation &mdash; CytoPy 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="reference.html" />
    <link rel="prev" title="Single-cell phenotype classification by high-dimensional clustering" href="cluster.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CytoPy
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#using-python">Using Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#installing-mongodb">Installing MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#installing-cytopy">Installing CytoPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data uploading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data.html#connecting-to-the-database">Connecting to the database</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html#projects-subjects">Projects &amp; Subjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html#adding-cytometry-data">Adding Cytometry data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data.html#cytometry-panels">Cytometry Panels</a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#creating-fcsexperiments">Creating FCSExperiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#adding-fcs-files">Adding *.fcs files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gating.html">Pre-processing with autonomous gates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gating.html#the-gating-and-template-class">The Gating and Template class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gating.html#plotting-a-population">Plotting a population</a></li>
<li class="toctree-l3"><a class="reference internal" href="gating.html#creating-and-applying-a-gate">Creating and applying a gate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gating.html#types-of-gates">Types of Gates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gating.html#densitythreshold">DensityThreshold</a></li>
<li class="toctree-l3"><a class="reference internal" href="gating.html#quantile">Quantile</a></li>
<li class="toctree-l3"><a class="reference internal" href="gating.html#densityclustering">DensityClustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="gating.html#mixturemodel">MixtureModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="gating.html#static">Static</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gating.html#using-control-data">Using control data</a></li>
<li class="toctree-l2"><a class="reference internal" href="gating.html#editing-gate">Editing gate</a></li>
<li class="toctree-l2"><a class="reference internal" href="gating.html#other-worthy-mentions">Other worthy mentions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch-effect analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="batch.html#choosing-a-reference-sample">Choosing a reference sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#evaluatebatcheffects">EvaluateBatchEffects</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#visualising-univariant-differences">Visualising univariant differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#visualising-multivariant-differences">Visualising multivariant differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#building-a-similarity-matrix">Building a similarity matrix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classify.html">Supervised cell classification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classify.html#introducing-the-cellclassifier">Introducing the CellClassifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="classify.html#training">Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="classify.html#validating">Validating</a></li>
<li class="toctree-l2"><a class="reference internal" href="classify.html#troubleshooting-with-backgating">Troubleshooting with backgating</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cluster.html">High-dimensional clustering</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cluster.html#the-clusteringdefinition">The ClusteringDefinition</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster.html#singleclustering">SingleClustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster.html#introducing-exploratory-data-analysis-with-explorer">Introducing exploratory data analysis with Explorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster.html#metaclustering">MetaClustering</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Feature extraction, selection, and description</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summarising-the-proportion-of-cell-populations-clusters">Summarising the proportion of cell populations/clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variance-and-multicolinearity">Variance and Multicolinearity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dimensionality-reduction">Dimensionality reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#feature-selection">Feature selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control-comparisons">Control comparisons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.fcs.html">cytopy.data.fcs</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.fcs_experiments.html">cytopy.data.fcs_experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.gating.html">cytopy.data.gating</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.mongo_setup.html">cytopy.data.mongo_setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.panel.html">cytopy.data.panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.project.html">cytopy.data.project</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.subject.html">cytopy.data.subject</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.data.utilities.html">cytopy.data.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.base.html">cytopy.flow.gating.base</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.actions.html">cytopy.flow.gating.actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.plotting.html">cytopy.flow.gating.plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.dbscan.html">cytopy.flow.gating.dbscan</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.defaults.html">cytopy.flow.gating.defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.density.html">cytopy.flow.gating.density</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.mixturemodel.html">cytopy.flow.gating.mixturemodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.quantile.html">cytopy.flow.gating.quantile</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.static.html">cytopy.flow.gating.static</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.gating.utilities.html">cytopy.flow.gating.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.supervised.html">cytopy.flow.supervised</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.clustering.html">cytopy.flow.clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.batch_effects.html">cytopy.flow.batch_effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.dim_reduction.html">cytopy.flow.dim_reductions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.feature_extraction.html">cytopy.flow.feature_extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.feedback.html">cytopy.flow.feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.read_write.html">cytopy.flow.read_write</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.transforms.html">cytopy.flow.transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cytopy.flow.utilities.html">cytopy.flow.utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CytoPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Feature extraction, selection, and summarisation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/features.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="feature-extraction-selection-and-summarisation">
<h1>Feature extraction, selection, and summarisation<a class="headerlink" href="#feature-extraction-selection-and-summarisation" title="Permalink to this headline">¶</a></h1>
<p>Once the biological samples of an experiment have been classified into phenotypically similar populations and/or clusters, we want to summarise these ‘features’ of the biological samples so that we can observe difference between clinical/experimental groups. CytoPy offers the feature extraction model for summarising the findings of an experiment and performing feature selection.</p>
<div class="section" id="summarising-the-proportion-of-cell-populations-clusters">
<h2>Summarising the proportion of cell populations/clusters<a class="headerlink" href="#summarising-the-proportion-of-cell-populations-clusters" title="Permalink to this headline">¶</a></h2>
<p>The main class of interest in the feature extraction module is the <strong>ExperimentalProportions</strong> class. This class takes an experiment and list of samples to extract data from like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cytopy.flow.feature_extraction</span> <span class="kn">import</span> <span class="n">ExperimentProportions</span>
<span class="kn">from</span> <span class="nn">cytopy.data.project</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="n">pd_project</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;Peritonitis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">pd_project</span><span class="o">.</span><span class="n">load_experiment</span><span class="p">(</span><span class="s1">&#39;PD_N_PDMCs&#39;</span><span class="p">)</span>

<span class="n">prop</span> <span class="o">=</span> <span class="n">ExperimentProportions</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="n">exp</span><span class="p">,</span> <span class="n">samples</span><span class="o">=</span><span class="n">exp</span><span class="o">.</span><span class="n">list_samples</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>ExperimentalProportions</strong> generates dataframes where each row is a biological sample and each column is a population or cluster statistic. Two types of statistics can be generated: the raw count of events within a cluster or a population or the proportion of events within a cluster or a population relative to the parent population that cluster or population was derived from.</p>
<p>If we wanted a dataframe that summarises the meta clusters of an experiment we would do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the clustering definition for the clusters we want</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">ClusteringDefinition</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">clustering_uid</span><span class="o">=</span><span class="s1">&#39;N_meta&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="c1"># Create a list of clusters of interest</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Neutrophils&#39;</span><span class="p">,</span> <span class="s1">&#39;Monocytes&#39;</span><span class="p">,</span> <span class="s1">&#39;DCs&#39;</span><span class="p">,</span> <span class="s1">&#39;B cells&#39;</span><span class="p">,</span> <span class="s1">&#39;T cells&#39;</span><span class="p">,</span> <span class="s1">&#39;Eosinophils&#39;</span><span class="p">]</span>
<span class="n">pg_populations</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">cluster_proportions</span><span class="p">(</span><span class="n">comparison_population</span><span class="o">=</span><span class="s1">&#39;Single_Live_CD45+&#39;</span><span class="p">,</span>
                                          <span class="n">clusters_of_interest</span><span class="o">=</span><span class="n">clusters</span><span class="p">,</span>
                                          <span class="n">clustering_definition</span><span class="o">=</span><span class="n">cd</span><span class="p">,</span>
                                          <span class="n">merge_associated_clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>By setting ‘merge_associated_clusters’ to True, the terms in ‘clusters’ will be searched for in all meta-clusters pulled from the experiment and clusters with like terms merged together (e.g. if the meta-clusters were [‘Neutrophils_1’, ‘Neutrophils_2’,…] then these would be merged into one cluster called ‘Neutrophils’).</p>
<p>If we wanted a dataframe that summarises the populations as predicted from XGBoost classification we would do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a list of populations of interest, prefixed with XGBoost</span>
<span class="n">populations</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Monocyte&#39;</span><span class="p">,</span> <span class="s1">&#39;Neutrophils&#39;</span><span class="p">,</span> <span class="s1">&#39;T cells&#39;</span><span class="p">,</span> <span class="s1">&#39;DCs&#39;</span><span class="p">,</span> <span class="s1">&#39;Eosinophils&#39;</span><span class="p">,</span> <span class="s1">&#39;B cells&#39;</span><span class="p">]</span>
<span class="n">populations</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;XGBoost </span><span class="si">{p}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">populations</span><span class="p">]</span>
<span class="n">pop_props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">population_proportions</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="s1">&#39;Single_Live_CD45+&#39;</span><span class="p">,</span>
                                         <span class="n">populations_of_interest</span><span class="o">=</span><span class="n">populations</span><span class="p">)</span>
</pre></div>
</div>
<p>You should see now how we have the tools to contrast and compare the results of multiple methodologies for cell phenotyping. We can also take the results of both clustering and supervised classification in this way and generate a consensus from both methods.</p>
<p>These tools help us build what we term a “feature space”; a matrix of ‘features’ that describe the cell populations of each biological sample (each row). But what if we want to label this feature space with some metadata, so that we had an additional column that corresponds to the clinical/experimental information we have on a biological sample and it’s derived subject? This is made simple using the function <em>meta_labelling</em> from our feature extraction module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pop_props</span> <span class="o">=</span> <span class="n">meta_labelling</span><span class="p">(</span><span class="n">dataframe</span><span class="o">=</span><span class="n">pop_props</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="n">exp</span><span class="p">,</span> <span class="n">meta_label</span><span class="o">=</span><span class="s1">&#39;peritonitis&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Given a dataframe with a column named ‘sample_id’ and the <strong>FCSExperiment</strong> the data was derived from, the <em>meta_labelling</em> function searches the <strong>Subject</strong>’s for a given ‘meta label’ and adds an additional column to the dataframe corresponding to the subjects value for this variable.</p>
</div>
<div class="section" id="variance-and-multicolinearity">
<h2>Variance and Multicolinearity<a class="headerlink" href="#variance-and-multicolinearity" title="Permalink to this headline">¶</a></h2>
<p>Once we have built a ‘feature space’ we will want to remove any redundant variables. We can use two utility functions of the featrue extraction module:</p>
<ul class="simple">
<li><p><em>sort_variance</em> - given a dataframe where columns correspond to features and rows the biological samples a sorted dataframe is returned ranking features from highest to lowest variance</p></li>
<li><p><em>multicolinearity_matrix</em> - given a dataframe where columns correspond to features and rows the biological samples, a multicolinearity matrix is plotted as a clustered heatmap. This will help identify variables that have high colinearity and where one might need removing.</p></li>
</ul>
</div>
<div class="section" id="dimensionality-reduction">
<h2>Dimensionality reduction<a class="headerlink" href="#dimensionality-reduction" title="Permalink to this headline">¶</a></h2>
<p>A rapid method for detecting if there is a ‘global’ difference between two experimental or clinical groups is by using dimensionality reduction and plotting data points coloured according to their group. In the example below we differentiate patients with and without acute peritonitis. The dataframe ‘summary’ contains the proportion of cell populations identified by XGBoost and the proportion if clusters from all our experiments combined. We can use any method from cytopy.flow.dim_reduction for the dimensionality reduction and a scatter plot is returned with data points coloured according to some label (here it is whether a patient has peritonitis or not):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cytopy.flow.feature_extraction</span> <span class="kn">import</span> <span class="n">dim_reduction</span>
<span class="n">dim_reduction</span><span class="p">(</span><span class="n">summary</span><span class="o">=</span><span class="n">summary</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;peritonitis&#39;</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;PCA&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/pca1.png" src="_images/pca1.png" />
</div>
<div class="section" id="feature-selection">
<h2>Feature selection<a class="headerlink" href="#feature-selection" title="Permalink to this headline">¶</a></h2>
<p>If the number of features is large and we want to narrow down which are of most value to predicting some clinical or experimental endpoint, we can use L1 regularisation in a sutiable linear model to do so. L1 regularisation, also known as ‘lasso’ regularisation, shrinks the coefficent of less important variables to zero, producing a more sparse model. By varying the regularisation term and oberving the coefficients of all our features, we can see which features shrink more rapidly compared to others. This serves as a helpful feature selection technique, giving us the variables important for predicting some clinical or experimental endpoint.</p>
<p>The feature extraction module contains a function for this called <em>l1_feature_selection</em>. This function takes the feature space, a dataframe of features where each row is a different biological sample and a ‘label’ column specifies the label to predict. We specify which features to include in our selection and the name of the label column to predict. The model takes a search space as a tuple. This is passed to Numpy.logspace to generate a range of values to use as the different L1 regularisation terms. The first value specifies the starting value and the second the end. The search space is a <em>n</em> values (where n is the third value in this argument) between the start and end on a log scale.</p>
<p>Finally we also provide the model to use. This must be a Scikit-Learn linear classifier that takes an L1 regularisation term as an argument ‘C’. If None is given then a linear support vector machine is used as default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l1_feature_selection</span><span class="p">(</span><span class="n">feature_space</span><span class="o">=</span><span class="n">summary</span><span class="p">,</span>
                     <span class="n">features</span><span class="o">=</span><span class="n">features</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s1">&#39;peritonitis&#39;</span><span class="p">,</span>
                     <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">search_space</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
                     <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/l1.png" src="_images/l1.png" />
</div>
<div class="section" id="control-comparisons">
<h2>Control comparisons<a class="headerlink" href="#control-comparisons" title="Permalink to this headline">¶</a></h2>
<p>If we have suitable control data we can use the <strong>ControlComparison</strong> class of the feature extractions module to generate additional variables. This can be helpful to clarrify certain findings, such as a change in a memory T cell population; if we had a control like a CD27 FMO, we could see if there is a difference between the control and the primary data. This is an experimental class at the moment and should be used with caution.</p>
<p>On initiation of a <strong>ControlComparison</strong> object with an experiment and some sample IDs, it checks that the samples listed have had their control populations predicted (see ‘Using control data’ under the section ‘Pre-processing and autonomous gates’). If samples haven’t been subjected to control gating, then this is performed automatically where control data is available.</p>
<p><strong>ControlComparison</strong> currently has one method <em>statistic_1d</em> which calculates a statistic for one control for all samples. Currently it only supports relative fold change in MFI but we hope to include more statistics in the future as well as 2D or 3D statistics:</p>
<ul class="simple">
<li><p>1D relative fold change in MFI: for each sample calculate the relative fold change in MFI between the control and the primary data for the variable that the control effects e.g. a CD27 FMO control would be relative fold change in MFI in CD27 between the primary data and the control</p></li>
</ul>
<p>For more details see cytopy.flow.feature_extraction.ControlComparison</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cluster.html" class="btn btn-neutral float-left" title="Single-cell phenotype classification by high-dimensional clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Ross Burton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>